Options +FollowSymLinks
RewriteEngine on

# Rewrite rule to serve HTML content from the vocabulary URI if requested
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^ontology$ http://xapi.vocab.pub/ontology/ [R=303]
RewriteRule ^ontology/$ http://xapi.vocab.pub/ontology/ [R=303]

# Rewrite rule to serve RDF/XML content from the vocabulary URI if requested
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml
RewriteRule ^ontology$ http://xapi.vocab.pub/ontology.rdf [R=303]
RewriteRule ^ontology/$ http://xapi.vocab.pub/ontology.rdf [R=303]

# Rewrite rule to serve Turtle content from the vocabulary URI if requested
RewriteCond %{HTTP_ACCEPT} text/turtle
RewriteRule ^ontology$ http://xapi.vocab.pub/ontology.ttl [R=303]
RewriteRule ^ontology/$ http://xapi.vocab.pub/ontology.ttl [R=303]

RewriteRule ^$ http://xapi.vocab.pub [L]

# Rewrite for faceted search
RewriteRule ^$ http://xapi.vocab.pub:8890/fct [L]

# Rewrite for SPARQL URI
# ---------------------------
RewriteRule ^sparql$ http://xapi.vocab.pub:8890/sparql [R=302]

# Rewrite rule to serve vocabulary context from the vocabulary URI if requested
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^vocabulary/context.jsonld$ http://xapi.vocab.pub/vocabulary/context.jsonld [R=303]


# ADL vocabulary dataset
# ---------------------------
# Rewrite rule to serve HTML content from the vocabulary IRI if requested
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^adl$ http://xapi.vocab.pub/datasets/adl/ [R=303]

# ADL vocabualry rewrite rule to serve JSON-LD content from the vocabulary IRI if requested
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^adl$ http://xapi.vocab.pub/datasets/adl.jsonld [R=303]

# ADL vocabulary rewrite rule for verbs & activity types - catch all IRIs
# ---------------------------
# Rewrite rule to serve HTML content from the vocabulary IRI if requested
RewriteCond %{HTTP_ACCEPT} !application/rdf\+xml.*(text/html|application/xhtml\+xml)
RewriteCond %{HTTP_ACCEPT} text/html [OR]
RewriteCond %{HTTP_ACCEPT} application/xhtml\+xml [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/.*
RewriteRule ^adl/([a-z-]+)$ http://xapi.vocab.pub/datasets/adl/#$1 [R=303,NE]
RewriteRule ^adl/([a-z-]+)/([a-z-]+)$ http://xapi.vocab.pub/datasets/adl/#$2 [R=303,NE]

# ADL vocabulary rewrite rule to serve JSON-LD content from a granular IRI if requested
RewriteCond %{HTTP_ACCEPT} application/ld\+json
RewriteRule ^adl/([a-z-]+)$ http://xapi.vocab.pub/datasets/adl.jsonld [R=303]

